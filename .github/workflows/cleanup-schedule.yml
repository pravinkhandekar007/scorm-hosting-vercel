name: Scheduled Cleanup of Expired Courses

on:
  schedule:
    - cron: "0 * * * *"   # Runs daily at midnight UTC. Adjust as needed.
  workflow_dispatch:      # Allows manual trigger from GitHub UI

jobs:
  cleanup:
    runs-on: ubuntu-latest

    steps:
      - name: Call Supabase Cleanup Function
        uses: fjogeleit/http-request-action@v1.4.0
        with:
          url: "https://mfooewemvofleynanjkb.supabase.co/functions/v1/cleanup-expired-courses" # replace with your actual URL
          method: GET
          # If your function requires a Bearer token, add headers like this:
          # headers: '{ "Authorization": "Bearer YOUR_SECRET_TOKEN" }'
