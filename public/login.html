<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Login / Sign Up</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f0f0f0; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
    #authContainer { background: #fff; padding: 30px; box-shadow: 0 0 15px rgba(0,0,0,0.2); border-radius: 8px; width: 320px; }
    h2 { margin-top: 0; text-align: center; }
    form { display: flex; flex-direction: column; }
    input[type="email"], input[type="password"] { padding: 10px; margin: 10px 0; font-size: 1em; border: 1px solid #ccc; border-radius: 4px; }
    label { margin: 10px 0 5px; font-weight: bold; }
    .radio-group { display: flex; justify-content: space-around; margin-bottom: 15px; }
    button { padding: 10px; font-size: 1em; background-color: #2c3e50; color: white; border: none; border-radius: 4px; cursor: pointer; }
    button:hover { background-color: #3b4a63; }
    #message { margin-top: 15px; height: 20px; text-align: center; color: red; }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <div id="authContainer">
    <h2>User Login / Sign Up</h2>
    <form id="authForm">
      <label for="email">Email:</label>
      <input type="email" id="email" placeholder="Enter your email" required />
      
      <label for="password">Password:</label>
      <input type="password" id="password" placeholder="Enter your password" required minlength="6" />
      
      <div class="radio-group">
        <label><input type="radio" name="mode" value="login" checked /> Login</label>
        <label><input type="radio" name="mode" value="signup" /> Sign Up</label>
      </div>
      
      <button type="submit">Submit</button>
    </form>
    <div id="message"></div>
  </div>

  <script>
    const SUPABASE_URL = 'https://mfooewemvofleynanjkb.supabase.co'; // Replace with your Supabase project URL
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1mb29ld2Vtdm9mbGV5bmFuamtiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkyOTUwMjYsImV4cCI6MjA3NDg3MTAyNn0.EFvtSe-k-SPDCf1-1py6ev7nBLDJFCrNgZ95_c29_ZY'; // Replace with your Supabase anon key

    const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    const form = document.getElementById('authForm');
    const message = document.getElementById('message');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      message.style.color = 'red';
      message.textContent = 'Processing...';

      const email = document.getElementById('email').value.trim();
      const password = document.getElementById('password').value.trim();
      const mode = form.mode.value;

      try {
        if (mode === 'login') {
          const { data: { user }, error } = await supabase.auth.signInWithPassword({ email, password });
          if (error) throw error;

          if (!user.email_confirmed_at) {
            message.style.color = 'orange';
            message.textContent = 'Please verify your email before logging in.';
            return;
          }

          message.style.color = 'green';
          message.textContent = 'Login successful! Redirecting...';
          // Add your redirection URL here
          setTimeout(() => window.location.href = '/', 1500);

        } else {
          const { error } = await supabase.auth.signUp({ email, password });
          if (error) throw error;
          message.style.color = 'green';
          message.textContent = 'Sign up successful! Please check your email to verify your account.';
        }
      } catch (err) {
        message.textContent = err.message;
      }
    });
  </script>
</body>
</html>
