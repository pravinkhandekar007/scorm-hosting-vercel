<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <title>User Profile â€“ PlayScorm</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      margin: 0;
      min-height: 100vh;
      background: #C0C0C0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 40px 20px;
    }
    .main-wrapper {
      max-width: 700px;
      width: 100%;
    }
    .banner {
      width: 100%;
      background: linear-gradient(to right, #00205B, #00857D);
      color: #fff;
      padding: 24px 0;
      border-radius: 20px 20px 0 0;
      font-weight: 700;
      font-size: 2rem;
      text-align: center;
      box-shadow: 0 2px 8px rgba(80,100,255,0.09);
      margin-bottom: 0;
    }
    .container {
      background: #fdfdfd;
      border-radius: 0 0 20px 20px;
      box-shadow: 0 6px 32px rgba(60,45,205,0.07);
      padding: 32px 48px 48px;
      box-sizing: border-box;
      color: #333;
    }
    h1 {
      text-align: center;
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 24px;
    }
    .profile-info {
      max-width: 480px;
      margin: 0 auto;
    }
    .field {
      display: flex;
      margin-bottom: 16px;
      font-size: 16px;
    }
    .label {
      min-width: 120px;
      font-weight: 700;
      color: #00205B;
      padding-right: 12px;
      text-align: right;
      user-select: none;
    }
    .value {
      flex: 1;
      background: #f7f8fa;
      padding: 12px 16px;
      border-radius: 8px;
      box-shadow: inset 0 1px 2px rgb(0 0 0 / 0.1);
      user-select: text;
      word-break: break-word;
    }
    /* Responsive */
    @media (max-width: 480px) {
      .container {
        padding: 24px 24px 32px;
      }
      .field {
        flex-direction: column;
      }
      .label {
        min-width: auto;
        text-align: left;
        margin-bottom: 4px;
        padding-right: 0;
      }
    }
  </style>
</head>
<body>
  <div class="main-wrapper">
    <div class="banner">Your Profile</div>
    <div class="container">
      <h1>User Profile Information</h1>
      <div class="profile-info" id="profile-info">
        <!-- Profile fields will be dynamically injected here -->
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      // Fetch user profile from your API
      try {
        const urlParams = new URLSearchParams(window.location.search);
        const userId = urlParams.get('id');

        if (!userId) {
          document.getElementById('profile-info').innerText = 'User ID missing in URL.';
          return;
        }

        const res = await fetch(`/api/profiles?id=${userId}`);
        const data = await res.json();

        if (!res.ok) {
          document.getElementById('profile-info').innerText = data.error || 'Failed to fetch profile.';
          return;
        }
        if (!data.length) {
          document.getElementById('profile-info').innerText = 'Profile not found.';
          return;
        }

        const profile = data[0];
        const container = document.getElementById('profile-info');
        container.innerHTML = '';

        function addField(label, value) {
          const field = document.createElement('div');
          field.className = 'field';
          const labelElem = document.createElement('div');
          labelElem.className = 'label';
          labelElem.textContent = label;
          const valueElem = document.createElement('div');
          valueElem.className = 'value';
          valueElem.textContent = value || '-';
          field.appendChild(labelElem);
          field.appendChild(valueElem);
          container.appendChild(field);
        }

        addField('User ID', profile.user_id || profile.id || '');
        addField('Full Name', profile.full_name || '');
        addField('Email', profile.email || '');
        addField('Role', profile.role || '');
        // Add other profile fields if needed here

      } catch (err) {
        document.getElementById('profile-info').innerText = 'Unexpected error while loading profile.';
      }
    });
  </script>
</body>
</html>
